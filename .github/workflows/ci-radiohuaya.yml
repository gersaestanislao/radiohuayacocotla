name: ğŸš¦ CI â€“ Validaciones del tema Radio Huaya

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  build-and-test:
    name: Validar SCSS y Accesibilidad
    runs-on: ubuntu-latest

    defaults:
      run:
        working-directory: wp-content/themes/Radio huaya

    steps:
      # 1ï¸âƒ£ Descarga el cÃ³digo del repositorio
      - name: ğŸ“¦ Checkout del cÃ³digo
        uses: actions/checkout@v4

      # 2ï¸âƒ£ Configura Node.js versiÃ³n 18
      - name: ğŸ§© Configurar Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 18

      # 3ï¸âƒ£ Instala las dependencias definidas en package.json
      - name: ğŸ“š Instalar dependencias
        run: npm install

      # 4ï¸âƒ£ Ejecuta Stylelint sobre tus archivos SCSS (modo tolerante)
      - name: ğŸ¨ Analizar SCSS con Stylelint (tolerante)
        run: npm run lint:scss || true

      # 5ï¸âƒ£ Ejecuta pruebas de accesibilidad con Pa11y
      - name: â™¿ Pruebas de accesibilidad (Pa11y)
        run: npm run lint:accessibility || true

      # 6ï¸âƒ£ Construye el CSS y JS del tema (opcional, para preparar deploy)
      - name: ğŸ§± Compilar assets
        run: npm run build || true
